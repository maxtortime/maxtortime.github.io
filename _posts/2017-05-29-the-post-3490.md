---
title: Hyper-V 네트워크 설정하기
layout: post
tags:
  - hyper-v
published: true
category: server
---
Hyper-V를 Windows 10에서 사용할 수 있게 되면서 VirtualBox를 쓸 필요가 없게 되었다. 일반적으로 가정에서는 DHCP를 써서 가상 머신과의 네트워크 설정에 큰 무리가 없지만 고정 IP를 쓰게 될 경우 좀 설정이 헷갈릴 수 있다.

Hyper-V는 가상 스위치를 이용해서 네트워크를 설정하게 되는데 고정 IP를 사용할 경우 그 IP를 기준으로 내부 스위치를 만들어서 새로운 서브넷을 만들어서 사용하면 된다.

## 내부 가상 스위치 만들기
먼저 `Hyper-V 관리자`를 실행하고 `가상 스위치 관리자`를 실행한다. 그 다음 내부를 선택하고 가상 스위치 만들기를 클릭한다. 그리고 이름은 아무렇게 하고 나서 확인을 누르면 내부 가상 스위치가 만들어진다. 다른 옵션은 신경쓰지 않아도 된다.

## 내부 가상 스위치 IP 설정하기

먼저 시작버튼->오른쪽클릭->네트워크 연결을 클릭한다,

![네트워크 및 공유센터 클릭]({{ site.baseurl }}/images/start_context.png)

다음 아래에 보이는 `네트워크 및 공유 센터`을 클릭한다.

![시작버튼->오른쪽클릭->네트워크연결]({{ site.baseurl }}/images/network_connection.png)

그러면 아까 만든 내부 가상 스위치가 보이는데 클릭 후 속성을 눌러 `인터넷 프로토콜 버전 4(TCP/IPv4) 속성` 을 클릭한다.

![IP 설정]({{ site.baseurl }}/images/ipconfig.png)

IP 주소는 원래 IP 대역과 다르게 설정하면 된다. 여기서 설정한 IP주소가 가상 컴퓨터의 IP주소가 될 것이다.

## 이더넷을 내부 가상 스위치와 공유

다시 `네트워크 및 공유센터`로 돌아와서 이번에는 로컬 영역 연결을 클릭해서 속성으로 이동 후 공유탭으로 간다.

![이더넷 공유]({{ site.baseurl }}/images/share.png)

그러면 스크린샷과 같은 설정화면을 볼 수 있는데 여기서 스크린샷처럼 설정을 한 후 확인을 누르면 된다. 또한 설정을 눌러서 내부 가상 스위치와의 포트 포워딩이 가능하다.

예를 들어 아래 스크린샷처럼 설정해줄 경우 호스트 컴퓨터 IP로 가상 컴퓨터에 SSH 접속이 가능하다.

![포트 포워딩]({{ site.baseurl }}/images/sshportfowarding.png)














